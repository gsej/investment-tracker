<form [formGroup]="accountSelectorForm">
  <div class="flex flex-col gap-2">
    @for (account of accounts; track account) {
    <div class="flex items-center">
      @if (multiSelectMode) {
      <div>
        <input type="checkbox" [id]="'chk_' + account.accountCode" [formControlName]="'chk_' + account.accountCode" (change)="onAccountChanged(account.accountCode, $event)" class="peer sr-only">
        <label [for]="'chk_' + account.accountCode" class="cursor-pointer select-none inline-flex items-center px-3 py-1.5 rounded border text-sm font-medium transition-colors
                 bg-white text-gray-700 border-gray-300 hover:bg-gray-50
                 peer-checked:bg-blue-500 peer-checked:text-white peer-checked:border-blue-600
                 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500"
                 (click)="onLabelClick($event, account.accountCode)">
          {{ account.accountCode }}
        </label>
      </div>
      } @else {
      <label class="cursor-pointer select-none">
        <input type="radio" name="rad_selectedAccount" [value]="account.accountCode" formControlName="rad_selectedAccount" (change)="onAccountChanged(account.accountCode, $event)" [id]="'rad_' + account.accountCode" class="peer sr-only">
        <span class="inline-flex items-center px-3 py-1.5 rounded border text-sm font-medium transition-colors
                 bg-white text-gray-700 border-gray-300 hover:bg-gray-50
                 peer-checked:bg-blue-500 peer-checked:text-white peer-checked:border-blue-600
                 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500">
          {{ account.accountCode }}
        </span>
      </label>
      }

    </div>
    }
    <div class="mt-3">
      <button type="button" (click)="applyChanges()" [disabled]="!hasChanges" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors">
        Apply Changes
      </button>
    </div>
  </div>
</form>
